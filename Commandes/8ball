const Discord = require('discord.js');

module.exports.run = (client, message, args) => {
    const embed = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setTitle('Fraude de permission')
        .setDescription('Vous ne pouvez pas m\'utiliser pour mentionner tout les membres du serveur.')
    .setFooter(" ğŒğˆğğ…ğ€ğ˜ ğ‡ğ„ğ‹ğ ", "https://cdn.discordapp.com/attachments/700405884286664825/704420862522163280/7dd6a75e5d4d35483592d43f775dc83b.png")
    .setTimestamp(new Date());

    if (!message.guild.member(message.author).hasPermission('MENTION_EVERYONE') && message.content.includes('@everyone')) {
        return message.channel.send(embed);
    }

    if (!message.guild.member(message.author).hasPermission('MENTION_EVERYONE') && message.content.includes('@here')) {
        return message.channel.send(embed);
    }

    const ambed = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setTitle('Aucune question posÃ©e')
        .setDescription('Vous devez poser une question au bot.')
    .setFooter(" ğŒğˆğğ…ğ€ğ˜ ğ‡ğ„ğ‹ğ ", "https://cdn.discordapp.com/attachments/700405884286664825/704420862522163280/7dd6a75e5d4d35483592d43f775dc83b.png")
    .setTimestamp(new Date());

    if (!args[0]) {
        return message.channel.send(ambed);
    }

    let question = args.join(' ');
    let reponses = ['Oui', 'Non', 'Peut-Ãªtre', 'Absolument', 'Haha la blague ğŸ¤£ ! Pas du tout', 'Je ne sais pas, peut-Ãªtre que oui, peut-Ãªtre que non'];
    let res = Math.floor(Math.random() * reponses.length);

    try {
    message.delete()
        .then((m) => {
        const bmbed = new Discord.RichEmbed()
        .setColor("RANDOM")
            .setAuthor(message.author.username)
            .addField('Question', question)
            .addField('RÃ©ponse', reponses[res])
            .setFooter(" ğŒğˆğğ…ğ€ğ˜ ğ‡ğ„ğ‹ğ ", "https://cdn.discordapp.com/attachments/700405884286664825/704420862522163280/7dd6a75e5d4d35483592d43f775dc83b.png")
            .setTimestamp(new Date());

    message.channel.send(bmbed);

        })
        .catch((error) => {
            const errorembed = new Discord.RichEmbed()
                .setColor("RANDOM")
                .setTitle('Erreur')
                .setDescription('Une erreur s\'est produite lors de l\'exÃ©cution de la commande. Veuillez rÃ©essayer ultÃ©rieurement. Si le problÃ¨me persiste, veuillez contacter ğ— ğ—¶ğ—»ğ—³ğ—®ğ˜†.#1654.')
                .addField('Erreur :', error)
                .setFooter(" ğŒğˆğğ…ğ€ğ˜ ğ‡ğ„ğ‹ğ ", "https://cdn.discordapp.com/attachments/700405884286664825/704420862522163280/7dd6a75e5d4d35483592d43f775dc83b.png")
                .setTimestamp(new Date());

            message.channel.send(errorembed);
            console.error(error);
        })

    } catch(e) {
        const errorembed = new Discord.RichEmbed()
            .setColor("RANDOM")
            .setTitle('Erreur')
            .setDescription('Une erreur s\'est produite lors de l\'exÃ©cution de la commande. Veuillez rÃ©essayer ultÃ©rieurement. Si le problÃ¨me persiste, veuillez contacter ğ— ğ—¶ğ—»ğ—³ğ—®ğ˜†.#1654.')
            .addField('Erreur :', e)
            .setFooter(" ğŒğˆğğ…ğ€ğ˜ ğ‡ğ„ğ‹ğ ", "https://cdn.discordapp.com/attachments/700405884286664825/704420862522163280/7dd6a75e5d4d35483592d43f775dc83b.png")
            .setTimestamp(new Date());

        message.channel.send(errorembed);
        console.error(e)
    }
}
module.exports.help = {
    name: '8ball'
}
